(function(t){function e(e){for(var n,r,s=e[0],l=e[1],c=e[2],u=0,p=[];u<s.length;u++)r=s[u],Object.prototype.hasOwnProperty.call(i,r)&&i[r]&&p.push(i[r][0]),i[r]=0;for(n in l)Object.prototype.hasOwnProperty.call(l,n)&&(t[n]=l[n]);d&&d(e);while(p.length)p.shift()();return o.push.apply(o,c||[]),a()}function a(){for(var t,e=0;e<o.length;e++){for(var a=o[e],n=!0,s=1;s<a.length;s++){var l=a[s];0!==i[l]&&(n=!1)}n&&(o.splice(e--,1),t=r(r.s=a[0]))}return t}var n={},i={index:0},o=[];function r(e){if(n[e])return n[e].exports;var a=n[e]={i:e,l:!1,exports:{}};return t[e].call(a.exports,a,a.exports,r),a.l=!0,a.exports}r.m=t,r.c=n,r.d=function(t,e,a){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:a})},r.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(r.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)r.d(a,n,function(e){return t[e]}.bind(null,n));return a},r.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="";var s=window["webpackJsonp"]=window["webpackJsonp"]||[],l=s.push.bind(s);s.push=e,s=s.slice();for(var c=0;c<s.length;c++)e(s[c]);var d=l;o.push([0,"chunk-vendors"]),a()})({0:function(t,e,a){t.exports=a("56d7")},"034f":function(t,e,a){"use strict";var n=a("d7ab"),i=a.n(n);i.a},"2eaa":function(t,e,a){},"359c":function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAFjElEQVR42uSbb2hVdRjHf7tszdXUWduqWW2u1da1hFrWerGihjkTsSEpYa5pMMFqCiX1IgwMIogIBKP5whLD8M+LXpkFqStQGegLuc2hMxbLojVz4uZWrq3vw32OnK7nnnOe3znn7nfogc+L3f3+PM/3nPOc37+TNzU1pSK2KvAkmA9qwX3gNlAMbuEyo2AEXARnmRT4AfRH6VxeBAIkwFPgRfAsqAzY3s/gW/Al6AKTpgpQDl4HbeCuiC7YL+BzsA38YYoAFOxm0A5mqNzYONgBPmRR9I0E0KQAbAajU9Nno+xDgW4cundAPdgNHlBm2BmwBpzUSViiRwZsBMcMCl6xL+RTB/sYSQ4oArvAC8ps2w9eBmNhCjAbfA2eUPGw42AJuByGABT8YfCIipdRPmjyEsErB9wMDsUweCtRH+IYtASgZPIFaFDxtQaOIU9HgDdAi4q/tXAsohxAye57kO/R+NP8jC0AzeD5HIwGaRT4Fd/epzlHHfGoM8ETsuN+RoKF4JyPUdgph7ol4G3wZwSjvkvcdolDv6d81D/Hsf2nrtMVfgvU+LgShx1+GwYfgE/BVvCq7TEbAj/y9PY3/vsa/68AlII7efo8n/9WPPvbDrZw+05Gd8DDHv7WcGxb3e6AajDu84q0+Rhr14OXQKXGOL2S69b7KNvm0+dxjvF63cyGOgW3ZHOAiVTYNAv87rTXtb8F7gFrBcmowKBMf5Og7FqO9YbX4CZhUGUGCVAqvHCbMgWgH1cLO33UIAGkvqy2LrYlwGJe0pLYYwYJIPWlnGO+LsAqYQP0+tpgkAAbbK9Uv7bKLsAiYeX3QLdBAnTf8H73tkXWUJhWU3oEFX8F9/KQ1CSjIXgfmCuok6Q7oFHY0XYDg7fmCJ8I6zQmNNb29ho889snXUskAWoFFWgN/rzBAtAjcEFQvjbhc+JjWW8M5v9nBGVrSIA5ggq/x0CAQUHZW0mAmYIKEzEQQDIeKCYBCgUVZsVAgNmCsoXSnaGZMRBA5CMJMCYoPy8GAlQJyo6RAFcEFeiwQ5HBwRcp2YGMKyTAgKBCvmHT4ExbqLxXsu02QAL0CztZarAAzwnL9yeEEyGylUq+rZ4LS7BvEutJaExr52l0lAtbqZGku2k6XK4xwvsJPASuGhI8bYCmNAS4PcFDR+nRkmqVPqllim3TCJ5iHrSe5YManb4C3jEg+C3si9TSMfMGQV2APbsdYMY0bIYUcd+6Vpe5M3QiQGNnwTKQl4PAqY8W0BfA3xNOW2OtWQp/BxrBclbcbe/wNNgIqiIIvAa8CXpC2GludTonmM/Z/W6HVaDFtvHC/Sq9P++1lEYDrC7OznT4+Rvwl2BC08yrVUmV3tufG1LOGOAkPmHPARbrXU5krrGVK/N5hsCyXcLHg8rujOh06Xq33eF8kHKpvM5WdiH4x0eHF8EsjVue6gyFHHyKY8wqANHksb+etJV910enHwd47j8KWYCmzD6ydex2TuBgxq36vkenSwMIsCTE4Dud+sjWcbHHa2ZBRvnHwW7OC8PgPDjA2bYwgADVIQXfxzH5FoB4EIxkaXBvjgY7JSEEP8KxOPbhNq2l11ercv5EhWZecThDOMkxpLKW8HEV2rMoexWsMPwOaPfqw68jHS6d7AcNEQ2DgwjQEfYXI/RFxk6XNbchvtUu8+oMrTPU8SrtsOYtXAIuCevQCG+dSn/R4mnST2boc7h9SnacZk4OBRjk/NQlWUeTGDVMR+ePGpjwjrJvXZJKOoubtP38DHhNpb/4nG4jHzrYpwvi2gGTVAVPWiZdktEdAdovc2mX+vyMfdCOIaxsneQZ398OjpYFaLfUob1r3FcyDN/Dfm1V8JH2XnZ2Twht7uG2erntijB9juLj6VhZQv3P7V8BBgAKqy0Tg0JzXwAAAABJRU5ErkJggg=="},"56d7":function(t,e,a){"use strict";a.r(e);a("d9a3"),a("c9db"),a("de3e"),a("618d");var n=a("0261"),i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"app"}},[t._m(0),a("el-main",[a("Home",{attrs:{msg:"Welcome to Your Vue.js App"}})],1)],1)},o=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"pageHead",staticStyle:{"text-align":"left",height:"160px",padding:"20px"}},[n("div",{staticStyle:{"text-align":"right"}},[n("span",[n("a",{staticStyle:{color:"#fff","text-decoration":"none"},attrs:{href:"https://github.com/simonblowsnow/2019-ncov-vis"}},[n("img",{staticStyle:{"margin-bottom":"-2px"},attrs:{src:a("359c"),width:"18"}}),n("label",{staticStyle:{"font-size":"16px"}},[t._v(" Github")])])])]),n("div",[n("div",{staticStyle:{"font-size":"26px"}},[t._v("新冠肺炎疫情"),n("label",{staticStyle:{"font-size":"24px"}},[t._v(" · 数据分析系统")])]),n("div",{staticStyle:{"font-size":"22px","margin-top":"5px",color:"#ddd","font-family":"'Times New Roman', Times, serif"}},[t._v(" WuHan 2019-nCoV Data Visualization Analysis System ")]),n("div",{staticStyle:{"font-size":"14px",color:"#ddd"}},[t._v("—— 开发中，敬请期待!")])])])}],r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"hello"},[a("div",{staticStyle:{"text-align":"left"}},[a("div",{staticStyle:{height:"40px","line-height":"40px"}},[a("label",{staticStyle:{"font-weight":"800","font-size":"18px"}},[t._v("国内疫情")]),a("label",{staticStyle:{float:"right",color:"#4197FD"}},[t._v("数据更新时间： "+t._s(t.updateTime))])])]),a("el-card",{staticClass:"box-card",staticStyle:{background:"#f4f4f5"}},[a("el-row",{attrs:{gutter:20}},t._l(t.sums,(function(e){return a("el-col",{key:e.name,attrs:{span:6}},[a("div",{staticClass:"grid-content "},[a("div",{staticClass:"sum_numb",style:{color:e.color,fontSize:"20px",marginBottom:"8px"}},[t._v(t._s(e.sum))]),a("div",{staticClass:"sum_numb",staticStyle:{color:"#333333","font-size":"14px"}},[t._v(t._s(e.text)+"病例")]),a("div",{staticClass:"sum_numb",staticStyle:{"font-size":"13px",color:"#999999","margin-top":"8px"}},[a("label",{staticStyle:{"font-weight":"200"}},[t._v("昨日 ")]),a("label",{style:{color:e.color}},[t._v(t._s(e.add))])])])])})),1)],1),a("div",{staticStyle:{"padding-top":"10px"}},[a("el-tabs",{on:{"tab-click":t.handleClickTab},model:{value:t.activeName,callback:function(e){t.activeName=e},expression:"activeName"}},t._l(t.tabs,(function(e,n){return a("el-tab-pane",{key:n,attrs:{label:e.label,name:e.name}},[a("el-row",{directives:[{name:"show",rawName:"v-show",value:t.activeName==e.name,expression:"activeName==c.name"}],attrs:{gutter:5}},[a("el-col",{attrs:{xs:24,sm:24,md:12,lg:12,xl:12}},[a("div",{staticClass:"chart",style:{height:t.mapHeight},attrs:{id:e.ids[0]}})]),a("el-col",{attrs:{xs:24,sm:24,md:12,lg:12,xl:12}},[a("div",{staticClass:"chart",staticStyle:{height:"500px"}},[a("el-scrollbar",{staticStyle:{height:"100%"}},[a("div",{staticStyle:{height:"900px"},attrs:{id:e.ids[1]}})])],1)])],1)],1)})),1)],1),a("div",{staticStyle:{height:"20px"}})],1)},s=[],l=(a("c354"),a("79dd"),a("1a8c"),a("9249"),a("c1f4"),a("3a20"),a("b128"),a("b3f9"),a("7267"),a("ec4a"),a("82ae")),c=a.n(l),d={Test:"test",Login:"webLogin",GetMap:"getMap",GetDataDetails:"getDataDetails",GetTimeData:"getTimeData",GetDataChina:"getDataChina"},u=a("5c3d"),p=a.n(u),f={};function m(){return{data:["2016","2017"],axisType:"category",autoPlay:!0,loop:!0,currentIndex:0,playInterval:1500,left:"0",right:"1%",top:"0%",width:"99%",symbolSize:10,label:{formatter:function(t){return t.substr(5)}},checkpointStyle:{borderColor:"#777",borderWidth:2},controlStyle:{showNextBtn:!0,showPrevBtn:!0,normal:{color:"#ff8800",borderColor:"#ff8800"},emphasis:{color:"#aaa",borderColor:"#aaa"}}}}f.setCookie=function(t,e,a){a=a||200;var n=new Date;n.setTime(n.getTime()+3600*a*1e3),document.cookie=t+"="+escape(e)+";expires="+n.toUTCString()},f.getCookie=function(t){var e=new RegExp("(^| )"+t+"=([^;]*)(;|$)"),a=document.cookie.match(e);return a?unescape(a[2]):null},f.postData=function(t,e,a,n,i){e["tk"]=f.getCookie("tk"),e["lc"]=f.getCookie("lc"),c.a.post("/api/"+t,e,i||{}).then((function(t){t.data.error?alert(t.data.message):a&&a(t.data)})).catch((function(t){n&&n(t)}))},f.ajaxData=function(t,e,a,n){e["tk"]=f.getCookie("tk"),e["lc"]=f.getCookie("lc"),c.a.get("/api/"+t,{params:e}).then((function(t){t.data.error?alert(t.data.message):a&&a(t.data)})).catch((function(t){n&&n(t)}))},f.login=function(t,e,a){f.postData(d.Login,{username:t||"david",password:e||"123456"},(function(t){t.error||(f.setCookie("tk",t.data.tk),f.setCookie("lc",t.data.lc),a&&a())}))},f.Names={},f.formatRegion=function(t,e){var a=p.a.getMap(t);if(a){var n=f.Names[t];return e.map((function(t){return{name:n[t[0]],value:t[1],code:t[0],tags:t.slice(2)}}))}},f.registerMap=function(t,e){e=JSON.parse(e),p.a.registerMap(t,e),f.Names[t]=e.features.reduce((function(t,e){return t[e.id.toString()]=e.properties.name,t}),{})},f.drawGraph=function(t,e){var a=p.a.init(document.getElementById(e));return a.setOption(t),a},f.draw=function(t,e){return f.drawGraph(t.option,e)},f.getDevice=function(){var t=document.documentElement.offsetWidth||document.body.offsetWidth;return t<768?"xs":t<1064?"sm":t<1200?"md":"lg"},f.Colors=["#F55253","#FF961E","#66666c","#178B50"];var h=m,g={title:{text:"",top:15,subtext:"点击各区块查看下级地图",textStyle:{color:"#4197FD",fontSize:16}},visualMap:{min:0,left:"left",top:"bottom",text:["高","低"],calculable:!0,inRange:{color:["#FFAA85","#FF7B69","#BF2121","#7F1818"],symbolSize:[40,40]}},series:[{name:"china",type:"map",mapType:"china",roam:!1,label:{emphasis:{show:!0,formatter:function(t){var e=t.data?t.data.tags[2]:0;return"{fline|"+t.name+"}\n{tline|确诊: "+t.value+"\n死亡："+e+"}\n"},position:"top",align:"left",fontSize:14,width:150,backgroundColor:"rgba(50, 50, 50, 0.8)",padding:[0,0],borderRadius:3,color:"#f7fafb",rich:{fline:{padding:[0,5,5,10],height:20,fontSize:16,fontWeight:400,color:"#FFFFFF"},tline:{padding:[0,5,5,10],color:"#F55253"}}},normal:{show:!1}},itemStyle:{normal:{label:{show:!1}},emphasis:{areaColor:null,borderColor:"#BF2121",borderWidth:1.5,shadowColor:"red",shadowOffsetX:-1,shadowOffsetY:-1,label:{show:!0}}},data:[{name:"北京",value:Math.round(1e3*Math.random())}]}]},v=[],b={baseOption:{timeline:h(),visualMap:g.visualMap,series:g.series},options:[]},x={name:"china",option:g,superOption:b,initData:null,instance:null,useMaxValue:!0};function A(t,e,a){var n=f.formatRegion(e,t),i=n.reduce((function(t,e){return e.value>t[1]&&(t[1]=e.value),[t[0]+e.value,t[1],e.value>t[2]&&e.value<t[1]?e.value:t[2]]}),[0,10,10]);return a.title.text="全国确诊："+i[0]+"，湖北："+i[1],v.push(i[2]),a.series[0]["data"]=n,x.useMaxValue||(a["visualMap"]={max:parseInt(1.25*v[v.length-1])}),a}function y(t,e){var a=Object.keys(t);return b.baseOption.timeline.data=a,b.options=a.map((function(a){var n={title:{text:"",top:55,textStyle:{color:"#bbb",fontSize:16}},series:[{}]};return A(t[a],e,n)})),b.baseOption.timeline.autoPlay=!1,b.baseOption.timeline.currentIndex=a.length-1,b}x.initData=function(t,e,a,n){a=a||"china",g.series[0].mapType=a,g.series[0].label.normal.show="china"!=a,v=[];var i=g;i=n?y(t,a):A(t,a,i);var o=parseInt(1.25*v.reduce((function(t,e){return t>e?t:e})));g.visualMap.max=o,x.instance=f.drawGraph(i,e)};var w=x,C=w,S=(a("af82"),a("9a14"),{tooltip:{trigger:"axis",axisPointer:{type:"shadow"}},title:{text:"",top:15,textStyle:{color:"#4197FD",fontSize:16}},legend:{show:!0,right:10,top:50,data:["确诊","疑似","死亡","治愈"]},grid:[{left:-65,top:"88",bottom:"3%",width:100,containLabel:!0},{left:45,width:"58%",top:"68",bottom:"3%",containLabel:!0},{right:"40",width:"25%",top:"68",bottom:"3%",containLabel:!0}],xAxis:[{left:"10px",show:!1},{type:"value",show:!1,position:"top",gridIndex:1},{type:"value",show:!1,position:"top",gridIndex:2}],yAxis:[{type:"category",inverse:!0,data:["福建","广州","厦门","南宁","北京","长沙","重庆"],axisLine:{show:!1},axisTick:{show:!1},axisLabel:{interval:0,margin:85,textStyle:{color:"#455A74",align:"left",fontSize:14},rich:{a:{color:"#fff",backgroundColor:"#FAAA39",width:20,height:20,align:"center",borderRadius:2},b:{color:"#fff",backgroundColor:"#4197FD",width:20,height:20,align:"center",borderRadius:2}},formatter:function(t,e){return"{"+(e<3?"a":"b")+"|"+(e+1)+"}  "+t.substr(0,4)}}},{gridIndex:1,type:"category",inverse:!0,show:!1,data:["福建","广州","厦门","南宁","北京","长沙","重庆"],axisLine:{show:!1},axisTick:{show:!1}},{gridIndex:2,type:"category",inverse:!0,show:!1,data:["福建","广州","厦门","南宁","北京","长沙","重庆"],axisLine:{show:!1},axisTick:{show:!1}}],series:[{name:"确诊",type:"bar",barWidth:20,xAxisIndex:1,yAxisIndex:1,data:[320,302,301,334,390,330,320]},{name:"疑似",type:"bar",stack:!0,barWidth:20,xAxisIndex:2,yAxisIndex:2,data:[200,302,301,334,390,330,320]}]}),k=["确诊","疑似","死亡","治愈"],T=[0,0,0,0],D={baseOption:{timeline:h(),legend:S.legend,tooltip:S.tooltip,grid:S.grid,xAxis:S.xAxis,yAxis:S.yAxis,series:S.series,animationDurationUpdate:1500,animationEasingUpdate:"quinticInOut"},options:[]},O={name:"barChina",option:S,superOption:D,initData:null,instance:null,useMaxValue:!0};function M(t,e,a){var n=[[],[],[],[]],i=0;t.sort((function(t,e){return e[1]-t[1]})).forEach((function(t){[1,3,4,5].forEach((function(e,a){n[a].push(t[e]),t[e]>T[a]&&(T[a]=t[e]),0==a&&(i+=t[e])}))}));for(var o=0;o<3;o++)a["yAxis"][o]["data"]=t.map((function(t){return e[t[0]]||t[2]}));return a.title.text="累计确诊 "+i,a["series"]=k.map((function(t,e){return{name:k[e],type:"bar",barWidth:20,stack:!(e<1),xAxisIndex:e<1?1:2,yAxisIndex:e<1?1:2,itemStyle:{normal:{barBorderRadius:[2,2,2,2],shadowBlur:[0,0,0,10],color:f.Colors[e],shadowColor:f.Colors[e]}},label:{normal:{show:e<1||3==e,distance:5,position:"right"}},data:n[e]}})),a}function B(t,e){var a=Object.keys(t);return D.baseOption.timeline.data=a,D.options=a.map((function(a){var n={title:{text:"",top:65,textStyle:{color:"#bbb",fontSize:14}},yAxis:[{data:[]},{data:[]},{data:[]}]};return M(t[a],e,n)})),D}O.initData=function(t,e,a,n){var i=S;i["legend"]["data"]=k,T=[0,0,0,0],i=n?B(t,a):M(t,a,i),"xs"===f.getDevice()&&(S.grid[1].width="51%"),O.useMaxValue&&(S.xAxis[1]["max"]=T[0],S.xAxis[2]["max"]=T[2]+T[3]);var o=f.drawGraph(i,e);o.dispatchAction({type:"legendUnSelect",name:"疑似"})};var F=O,G=F,j={name:"Home",props:{msg:String},data:function(){return{sums:[{name:"confirmed",text:"确诊",color:f.Colors[0],sum:42744,add:"+2484"},{name:"suspected",text:"疑似",color:f.Colors[1],sum:21675,add:"+3536"},{name:"die",text:"死亡",color:f.Colors[2],sum:1017,add:"+108"},{name:"ok",text:"治愈",color:f.Colors[3],sum:4202,add:"+716"}],updateTime:"2020.02.11 20:39",showIndex:0,tabs:[{label:"全国实时疫情",name:"china",ids:["ecChina","ecBar1"],level:1,allTime:0,data:null},{label:"时间序列回放",name:"provinceTime",ids:["ecProvinceTime","ecBarTime2"],level:1,allTime:1,data:null},{label:"省实时疫情",name:"province",ids:["ecProvince","ecBar2"],level:2,allTime:0,data:null},{label:"省舆情回放",name:"chinaTime",ids:["ecChinaTime","ecBarTime1"],level:2,allTime:1,data:null}],activeName:"china",charts:[C,G],currentProvince:"420000",mapHeight:"xs"===f.getDevice()?"300px":"500px"}},mounted:function(){this.init()},methods:{init:function(){this.loadMap("china")},getTab:function(t,e){return this.tabs[t+e-(e>1?0:1)]},loadMap:function(t,e,a){var n=this;if(t in f.Names)return n.loadData(t,e,a);f.ajaxData(d.GetMap,{id:t},(function(i){f.registerMap(t,i.data),n.loadData(t,e,a)}))},loadData:function(t,e,a){var n=this;e||(e=1),a||(a=0);var i=this.getTab(a,e);if(i.data)return n.drawGraph(i.data,t,e,a);var o=a?d.GetTimeData:d.GetDataDetails;f.ajaxData(o,{level:e,name:t},(function(o){i.data=o.data,n.drawGraph(o.data,t,e,a)}))},drawGraph:function(t,e,a,n){var i=this,o=i.getTab(n,a).ids,r=t;if(n){var s=Object.keys(t);r=t[s[s.length-1]]}var l=26*r.length+20;document.getElementById(o[1]).style.height=(l<350?350:l)+"px",C.initData(t,o[0],e,n),C.instance.on("click",(function(t){"map"===t.seriesType&&(2!=a++?(i.activeName=i.getTab(n,a).name,i.loadMap(t.data.code,a,n)):alert(a))}));var c=f.Names[e];G.initData(t,o[1],c,n)},handleClickTab:function(t){var e=this.tabs[parseInt(t.index)],a=1==e.level?"china":this.currentProvince;this.loadMap(a,e.level,e.allTime)}}},P=j,I=(a("e5f6"),a("5511")),H=Object(I["a"])(P,r,s,!1,null,"a28c5e98",null),E=H.exports,N={name:"app",components:{Home:E}},Y=N,W=(a("034f"),Object(I["a"])(Y,i,o,!1,null,null,null)),z=W.exports,R=(a("46c6"),a("2ca7")),V=a.n(R);n["default"].prototype.$echarts=p.a,n["default"].use(V.a),n["default"].config.productionTip=!1,new n["default"]({render:function(t){return t(z)}}).$mount("#app")},d7ab:function(t,e,a){},e5f6:function(t,e,a){"use strict";var n=a("2eaa"),i=a.n(n);i.a}});
//# sourceMappingURL=index.2d89bc75.js.map